<script defer>
    //path of page declaration
    var path = window.location.pathname.toString();
    path = path.replace("/customizeMoneyGame", "").replace(/\/id.*/, "");

    //settings from data base
    var settings = '<%-settings%>';
    settings = JSON.parse(settings); //parse to get object

    settings.progressBar == 'true' ? settings.progressBar = true : settings.progressBar = false;

    // game elems declaration
    var backBtn = document.getElementById("backBtn");
    var progressBar = document.getElementById("progressBar");
    var nextBtn = document.getElementById("nextBtn");
    var againBtn = document.getElementById("againBtn");
    var parnet = document.getElementById("parnet");
    var basket = document.getElementById("basket");

    // changers declaration
    var backBtnChanger = document.getElementById("backBtnChanger");
    var progressBarChanger = document.getElementById("progressBarChanger");
    var nextBtnChanger = document.getElementById("nextBtnChanger");
    var againBtnChanger = document.getElementById("againBtnChanger");
    var parnetChanger = document.getElementById("parnetChanger");
    var basketChanger = document.getElementById("basketChanger");
    var submitBtn = document.getElementById("submitBtn");

    // main part
    switch (path) {
        case "/collectionMoney":
            disableChanger(backBtnChanger);
            disableChanger(againBtnChanger);
            disableChanger(basketChanger);
            break;

        case "/selectionGoods":
            disableChanger(againBtnChanger);
            disableChanger(parnetChanger);
            break;

        case "/paymentPurchase":
            disableChanger(againBtnChanger);
            disableChanger(basketChanger);
            break;

        case "/takeChangee":
            disableChanger(nextBtnChanger);
            disableChanger(basketChanger);
            break;

        default:
            break;
    }

    //listeners of changers
    backBtnChanger.addEventListener('change', changeElem);
    progressBarChanger.addEventListener('change', changeElem);
    nextBtnChanger.addEventListener('change', changeElem);
    againBtnChanger.addEventListener('change', changeElem);
    parnetChanger.addEventListener('change', changeElem);
    basketChanger.addEventListener('change', changeElem);

    //input values from DB
    backBtnChanger.value = settings.backBtn;
    progressBarChanger.checked = settings.progressBar;
    nextBtnChanger.value = settings.nextBtn;
    againBtnChanger.value = settings.againBtn;
    parnetChanger.value = settings.parnet;
    basketChanger.value = settings.basket;

    //changing design of game
    showFromDB(backBtnChanger);
    showFromDB(progressBarChanger);
    showFromDB(nextBtnChanger);
    showFromDB(againBtnChanger);
    showFromDB(parnetChanger);
    showFromDB(basketChanger);

    //end of main part

    // function declaration part
    function disableChanger(elem) {
        elem.classList.add("disabled");
        elem.setAttribute("disabled", "disabled");

        var label = elem.parentElement;
        label.classList.add("disabled");
    }

    function changeElem() {
        if (this.getAttribute('type') == 'checkbox')
            this.checked ? progressBar.classList.remove('none') : progressBar.classList.add('none');

        else {
            var searchId = this.id.toString().replace('Changer', '');
            var elem = document.querySelector(searchId);

            //elem.style.background = `url(${path}${this.value}.png)`;
        }
    }

    function showFromDB(changer) {
        if (changer.getAttribute('type') == 'checkbox')
            changer.checked ? progressBar.classList.remove('none') : progressBar.classList.add('none');

        else {
            var searchId = changer.id.toString().replace('Changer', '');
            var elem = document.querySelector(searchId);

            //elem.style.background = `url(${path}${this.value}.png)`;
        }
    }

    function getValue(areaFromDb) {
        var value = areaFromDb.toString();
        value.replace('', '');
        return parseInt(value);
    }

    submitBtn.onclick = function () {
        var newSettings = {};

        //need to post url of images by tamplate with value of changer
        newSettings.backBtn = backBtnChanger.value;
        newSettings.progressBar = progressBarChanger.checked.toString();
        newSettings.nextBtn = nextBtnChanger.value;
        newSettings.againBtn = againBtnChanger.value;
        newSettings.parnet = parnetChanger.value;
        newSettings.basket = basketChanger.value;

        $.ajax({
            type: 'POST',
            url: window.location.pathname,
            dataType: 'json',
            data: newSettings,
            success: console.log('Success'),
        });
    }
</script>